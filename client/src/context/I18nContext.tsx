import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';

export type LangCode = 'en' | 'hi' | 'es' | 'fr' | 'de';

// Minimal translation dictionaries. Expand as needed.
const dictionaries: Record<LangCode, Record<string, string>> = {
  en: {
    'nav.home': 'Home',
    'nav.problems': 'Problems',
    'nav.contests': 'Contests',
    'nav.discuss': 'Discuss',
    'nav.leaderboard': 'Leaderboard',
    'nav.company': 'Company',
    'nav.contact': 'Contact',
    'nav.wallet': 'Wallet',
    'settings.preferences.language': 'Language',
    // Login page
    'login.title': 'Welcome Back',
    'login.subtitle': 'Sign in to <b>EarnByCode</b>',
    'login.email': 'Email Address',
    'login.password': 'Password',
    'login.remember': 'Remember me',
    'login.forgot': 'Forgot password?',
    'login.submit': 'Sign In to EarnByCode',
    'login.continue_with': 'Or continue with',
    'login.no_account': "Don't have an account?",
    'login.create_here': 'Create one here',
    'login.error.fill_all': 'Please fill in all fields',
    'login.error.invalid': 'Invalid email or password',
    'login.success': 'You have been successfully logged in.',
    // Common / Header / Footer
    'common.company': 'Company',
    'common.about': 'About',
    'common.about_us': 'About Us',
    'common.careers': 'Careers',
    'common.press': 'Press',
    'common.contact': 'Contact',
    'common.blog': 'Blog',
    'common.help_center': 'Help Center',
    'common.community': 'Community',
    'common.stay_connected': 'Stay Connected',
    'common.subscribe_newsletter': 'Subscribe Newsletter',
    'common.join_community': 'Join Community',
    'common.legal': 'Legal',
    'common.terms': 'Terms of Service',
    'common.privacy': 'Privacy Policy',
    'common.cookies': 'Cookie Policy',
    'common.all_rights_reserved': 'All rights reserved.',
    'auth.login': 'Log in',
    'auth.signup': 'Sign Up',
    'auth.create_free_account': 'Create Free Account',
    'user.your_profile': 'Your Profile',
    'user.settings': 'Settings',
    'user.admin_panel': 'Admin Panel',
    'user.admin': 'Admin',
    'user.sign_out': 'Sign out',
    'stats.coins': 'Coins',
    'stats.wallet': 'Wallet',
    'stats.points': 'Points',
    // Wallet / Admin Wallet
    'wallet.title': 'My Wallet',
    'wallet.add_funds': 'Add Funds',
    'wallet.withdraw_funds': 'Withdraw Funds',
    'wallet.available_balance': 'Available Balance:',
    'wallet.minimum_deposit': 'Minimum deposit: ₹1',
    'wallet.minimum_withdrawal': 'Minimum withdrawal: ₹5',
    'admin.wallet.metrics': 'Wallet Metrics',
    'admin.wallet.total_collected': 'Total Collected',
    'admin.wallet.total_payouts': 'Total Payouts',
    'admin.wallet.admin_balance': 'Admin Balance',
    'admin.wallet.settle_contest': 'Settle Contest',
    'admin.wallet.contest_id': 'Contest ID',
    'admin.wallet.settle': 'Settle',
    // Leaderboard
    'leaderboard.title': 'EarnByCode Leaderboard',
    'leaderboard.search_placeholder': 'Search by username or name...',
    'leaderboard.sort_name': 'Name',
    'leaderboard.solved': 'Solved',
    'leaderboard.subtitle': 'Top performers and their achievements',
    'leaderboard.subtitle2': 'Compete and climb the ranks to earn more with EarnByCode',
    'leaderboard.full_rankings': 'Full Rankings',
    'leaderboard.no_users': 'No users found matching your search',
    'leaderboard.clear_search': 'Clear Search',
    // Contests
    'contests.title': 'EarnByCode Contests',
    'contests.subtitle': 'Compete with developers worldwide and win cash prizes! Test your skills and climb the leaderboard.',
    'contests.tab.all': 'All',
    'contests.tab.upcoming': 'Upcoming',
    'contests.tab.live': 'Live',
    'contests.tab.ended': 'Ended',
    'contests.loading': 'Loading contests...',
    'contests.empty.title': 'No contests found',
    'contests.empty.all_desc': 'There are currently no contests available. New exciting contests are coming soon!',
    'contests.empty.tab_desc': 'There are no {tab} contests at the moment.',
    'contests.view_all': 'View all contests',
    'contests.start': 'Start',
    'contests.duration': 'Duration',
    'contests.fee': 'Fee',
    'contests.prize': 'Prize',
    'contests.live_badge': 'LIVE',
    'contests.view_results': 'View Results',
    'contests.enter': 'Enter Contest',
    'contests.registration_closed': 'Registration Closed',
    'contests.registered': '✓ Registered',
    'contests.join': 'Join Contest',
    'contests.login_required': 'Login Required',
    'contests.login_required_desc': 'Please login to participate in contests and compete for prizes.',
    'contests.status.upcoming': 'Upcoming',
    'contests.status.live': 'Live',
    'contests.status.ended': 'Ended',
    'contests.status.unknown': 'Unknown',
    'contests.problems_count': '{n} problems',
    // Home
    'home.hero.tagline': 'Code Your Way to Earnings',
    'home.hero.subtitle': 'The ultimate platform for developers to compete, earn, and grow their skills. Build winning solutions, earn rewards, and cash out your success on EarnByCode.',
    'home.btn.start_coding': 'Start Coding',
    'home.btn.join_contest': 'Join Contest',
    'home.btn.create_account': 'Create Free Account',
    'home.stats.active_coders': 'Active Coders',
    'home.stats.problems_solved': 'Problems Solved',
    'home.stats.total_prizes': 'Total Prizes Won',
    'home.stats.live_contests': 'Live Contests',
    'home.why.title': 'Why Choose EarnByCode?',
    'home.why.subtitle': "More than just coding practice - it's a complete ecosystem where your skills earn you real rewards and recognition.",
    'home.features.realtime.title': 'Real-time Coding',
    'home.features.realtime.desc': 'Code in your browser with instant feedback and lightning-fast execution',
    'home.features.earn_money.title': 'Earn Real Money',
    'home.features.earn_money.desc': 'Convert your coding skills into cash rewards through contests and challenges',
    'home.features.matching.title': 'Skill-based Matching',
    'home.features.matching.desc': 'Compete against developers of similar skill levels for fair competition',
    'home.features.ai.title': 'AI-Powered Learning',
    'home.features.ai.desc': 'Get personalized problem recommendations based on your coding patterns',
    'home.how.title': 'How It Works',
    'home.how.subtitle': 'Simple steps to start earning',
    'home.how.step1.title': 'Solve Problems',
    'home.how.step1.desc': 'Complete coding challenges and earn 1 codecoin per solved problem',
    'home.how.step2.title': 'Join Contests',
    'home.how.step2.desc': 'Participate in paid contests and compete for cash prizes',
    'home.how.step3.title': 'Win & Withdraw',
    'home.how.step3.desc': 'Win contests and withdraw your earnings to your bank account',
    'home.cta.title': 'Ready to Start Earning with Code?',
    'home.cta.subtitle': 'Join thousands of developers who are already earning with EarnByCode',
    'home.cta.get_started': 'Get Started Now',
    'home.cta.browse_contests': 'Browse Contests',
    // Public Profile
    'profile.codecoins': 'Codecoins',
    'profile.points': 'Points',
    'profile.rank': 'Leaderboard Rank',
    'profile.solved': 'Solved',
    'profile.recent_solved': 'Recent Solved Problems',
    'profile.recent_contests': 'Recent Contests',
    'profile.user_not_found': 'User not found',
    'profile.back_to_leaderboard': 'Back to Leaderboard',
    // Settings basic
    'settings.title': 'Settings',
    'settings.subtitle': 'Manage your account and preferences',
    'settings.tab.account': 'Account',
    'settings.tab.notifications': 'Notifications',
    'settings.tab.privacy': 'Privacy',
    'settings.tab.preferences': 'Preferences',
    // Brand
    'brand.tagline': 'Code Your Way to Earnings',
    'brand.description': 'The platform where developers compete, earn with EarnByCode, and claim real rewards through skill-based coding challenges.',
    // Register
    'register.title': 'Join EarnByCode',
    'register.subtitle': 'Create your <b>EarnByCode</b> account',
    'register.have_account': 'Already have an account?',
    'register.sign_in_here': 'Sign in here',
    'register.or_email': 'Or continue with email',
    'register.full_name': 'Full Name',
    'register.username': 'Username',
    'register.email': 'Email Address',
    'register.password': 'Password',
    'register.confirm_password': 'Confirm Password',
    'register.placeholder.full_name': 'Enter your full name',
    'register.placeholder.username': 'Choose a unique username',
    'register.placeholder.email': 'Enter your email address',
    'register.placeholder.password': 'Create a strong password (min 6 chars)',
    'register.placeholder.confirm_password': 'Confirm your password',
    'register.creating': 'Creating your account...',
    'register.submit': 'Create EarnByCode Account',
    'register.terms_prefix': 'By creating an account, you agree to our',
    'register.terms': 'Terms of Service',
    'register.privacy': 'Privacy Policy',
    'register.success': 'Registration successful! Welcome to EarnByCode.',
    'register.google_error': 'Failed to register with Google',
    'register.fill_all': 'Please fill in all fields',
    'register.passwords_no_match': 'Passwords do not match',
    'register.password_short': 'Password must be at least 6 characters long',
    'register.email_exists': 'Email is already registered',
    'register.username_exists': 'Username is already taken',
    // Verify Email
    'verify.title': 'Verify your email',
    'verify.subtitle': 'We sent a 6-digit code to your email. Enter it below.',
    'verify.email_label': 'Email Address',
    'verify.email_hint': 'Make sure this matches the inbox where you received the code.',
    'verify.email_wrong': 'Wrong email? Change',
    'verify.code_label': 'Verification Code',
    'verify.code_placeholder': 'Enter 6-digit code',
    'verify.verifying': 'Verifying…',
    'verify.verify_button': 'Verify Email',
    'verify.resend': 'Resend code',
    'verify.resend_in': 'Resend in {s}s',
    'verify.didnt_receive': "Didn’t receive the email? Check your spam folder or try resending.",
    'verify.back_to_login': 'Back to Login',
    'verify.enter_both': 'Please enter your email and the verification code',
    'verify.enter_email': 'Please enter your email',
    'verify.sent': 'Verification code sent',
    'verify.success': 'Email verified successfully',
    'verify.fail': 'Failed to verify email',
    // Submissions
    'subs.title': 'My Submissions',
    'subs.subtitle': 'Track your coding progress and submission history',
    'subs.filter.all': 'All Submissions',
    'subs.filter.accepted': 'Accepted',
    'subs.filter.wrong_answer': 'Wrong Answer',
    'subs.filter.tle': 'Time Limit Exceeded',
    'subs.filter.runtime_error': 'Runtime Error',
    'subs.filter.compilation_error': 'Compilation Error',
    'subs.sort.label': 'Sort by:',
    'subs.sort.date_desc': 'Date (newest)',
    'subs.sort.date_asc': 'Date (oldest)',
    'subs.sort.status_asc': 'Status (A→Z)',
    'subs.sort.status_desc': 'Status (Z→A)',
    'subs.sort.lang_asc': 'Language (A→Z)',
    'subs.sort.lang_desc': 'Language (Z→A)',
    'subs.pagination.prev': 'Prev',
    'subs.pagination.next': 'Next',
    'subs.pagination.page_of': 'Page {p} of {t}',
    'subs.pagination.per_page': '{n} / page',
    'subs.list.title': 'Submission History',
    'subs.list.total': '{n} total',
    'subs.card.tests_passed': 'tests passed',
    'subs.card.runtime': 'Runtime:',
    'subs.card.memory': 'Memory:',
    'subs.empty.title': 'No submissions yet',
    'subs.empty.subtitle': 'Start solving problems to see your submissions here',
    'subs.empty.cta': 'Browse Problems',
    'subs.modal.title': 'Submission Details - {title}',
    'subs.modal.status': 'Status',
    'subs.modal.language': 'Language',
    'subs.modal.runtime': 'Runtime',
    'subs.modal.memory': 'Memory',
    'subs.modal.submitted_code': 'Submitted Code',
    'subs.modal.test_results': 'Test Results',
    'subs.modal.tests_passed': 'tests passed',
    'subs.modal.close': 'Close',
    // Submission Detail page
    'subs.detail.back': 'Back',
    'subs.detail.title': 'Submission Details',
    'subs.detail.problem': 'Problem',
    'subs.detail.submitted': 'Submitted',
    'subs.detail.language': 'Language',
    'subs.detail.status': 'Status',
    'subs.detail.runtime': 'Runtime',
    'subs.detail.memory': 'Memory',
    'subs.detail.tests_passed': 'Tests Passed',
    'subs.detail.submitted_code': 'Submitted Code',
    'subs.detail.not_found': 'Submission not found',
    // Problems List
    'problems.title': 'EarnByCode Problems',
    'problems.subtitle': 'Master your coding skills with our curated collection of programming challenges',
    'problems.stats.count': 'Problems',
    'problems.stats.learning': 'Learning',
    'problems.active_filters': 'Active Filters:',
    'problems.filter.search': 'Search:',
    'problems.filter.level': 'Level:',
    'problems.filter.topic': 'Topic:',
    'problems.clear_all': 'Clear All',
    'problems.loading.title': 'Loading Problems',
    'problems.loading.subtitle': 'Preparing your coding challenges...',
    'problems.searching': 'Searching challenges...',
    'problems.empty.title': 'No Problems Found',
    'problems.empty.desc': "We couldn't find any problems matching your current filters.\nTry adjusting your search criteria to discover more challenges.",
    'problems.empty.reset': 'Reset All Filters',
    // Problem Detail
    'problem.loading': 'Loading problem...',
    'problem.accepted': '{p}% Accepted',
    'problem.submissions_chip': '{n} Submissions',
    'problem.codecoin': '1 Codecoin',
    'problem.tab.description': 'Description',
    'problem.tab.editorial': 'Editorial',
    'problem.tab.discuss': 'Discuss',
    'problem.examples': 'Examples',
    'problem.example_n': 'Example {i}:',
    'problem.input': 'Input: ',
    'problem.output': 'Output: ',
    'problem.explanation': 'Explanation: ',
    'problem.constraints': 'Constraints',
    'problem.editorial.locked': 'Editorial available after solving the problem',
    'problem.discuss.empty': 'No discussions yet. Be the first to start one!',
    // Login Prompt
    'login.required.title': 'Sign In Required',
    'login.required.desc': 'You need to be signed in to submit or run code. Please log in or create an account.',
    'login.required.cancel': 'Cancel',
    'login.required.login': 'Log In',
  },
  hi: {
    'nav.home': 'मुखपृष्ठ',
    'nav.problems': 'समस्याएँ',
    'nav.contests': 'प्रतियोगिताएँ',
    'nav.discuss': 'चर्चा',
    'nav.leaderboard': 'लीडरबोर्ड',
    'nav.company': 'कंपनी',
    'nav.contact': 'संपर्क',
    'nav.wallet': 'वॉलेट',
    'settings.preferences.language': 'भाषा',
    // Login page
    'login.title': 'वापसी पर स्वागत है',
    'login.subtitle': '<b>EarnByCode</b> में साइन इन करें',
    'login.email': 'ईमेल पता',
    'login.password': 'पासवर्ड',
    'login.remember': 'मुझे याद रखें',
    'login.forgot': 'पासवर्ड भूल गए?',
    'login.submit': 'EarnByCode में साइन इन करें',
    'login.continue_with': 'या जारी रखें',
    'login.no_account': 'खाता नहीं है?',
    'login.create_here': 'यहाँ बनाएँ',
    'login.error.fill_all': 'कृपया सभी फ़ील्ड भरें',
    'login.error.invalid': 'अमान्य ईमेल या पासवर्ड',
    'login.success': 'आप सफलतापूर्वक लॉग इन हो गए हैं।',
    // Common / Header / Footer
    'common.company': 'कंपनी',
    'common.about': 'परिचय',
    'common.about_us': 'हमारे बारे में',
    'common.careers': 'करियर',
    'common.press': 'प्रेस',
    'common.contact': 'संपर्क',
    'common.blog': 'ब्लॉग',
    'common.help_center': 'सहायता केंद्र',
    'common.community': 'समुदाय',
    'common.stay_connected': 'जुड़े रहें',
    'common.subscribe_newsletter': 'न्यूज़लेटर सदस्यता लें',
    'common.join_community': 'समुदाय से जुड़ें',
    'common.legal': 'कानूनी',
    'common.terms': 'सेवा की शर्तें',
    'common.privacy': 'गोपनीयता नीति',
    'common.cookies': 'कुकी नीति',
    'common.all_rights_reserved': 'सर्वाधिकार सुरक्षित।',
    'auth.login': 'लॉग इन',
    'auth.signup': 'साइन अप',
    'auth.create_free_account': 'मुफ्त खाता बनाएं',
    'user.your_profile': 'आपकी प्रोफ़ाइल',
    'user.settings': 'सेटिंग्स',
    'user.admin_panel': 'एडमिन पैनल',
    'user.admin': 'एडमिन',
    'user.sign_out': 'साइन आउट',
    'stats.coins': 'कॉइन्स',
    'stats.wallet': 'वॉलेट',
    'stats.points': 'अंक',
    // Wallet / Admin Wallet
    'wallet.title': 'मेरा वॉलेट',
    'wallet.add_funds': 'धन जोड़ें',
    'wallet.withdraw_funds': 'धन निकालें',
    'wallet.available_balance': 'उपलब्ध शेष:',
    'wallet.minimum_deposit': 'न्यूनतम जमा: ₹1',
    'wallet.minimum_withdrawal': 'न्यूनतम निकासी: ₹5',
    'admin.wallet.metrics': 'वॉलेट मेट्रिक्स',
    'admin.wallet.total_collected': 'कुल संग्रह',
    'admin.wallet.total_payouts': 'कुल भुगतान',
    'admin.wallet.admin_balance': 'एडमिन बैलेंस',
    'admin.wallet.settle_contest': 'कॉन्टेस्ट सेटल करें',
    'admin.wallet.contest_id': 'कॉन्टेस्ट आईडी',
    'admin.wallet.settle': 'सेटल करें',
    // Leaderboard
    'leaderboard.title': 'EarnByCode लीडरबोर्ड',
    'leaderboard.search_placeholder': 'उपयोगकर्ता नाम या नाम से खोजें...',
    'leaderboard.sort_name': 'नाम',
    'leaderboard.solved': 'हल किए',
    'leaderboard.subtitle': 'श्रेष्ठ प्रदर्शनकर्ता और उनकी उपलब्धियाँ',
    'leaderboard.subtitle2': 'प्रतिस्पर्धा करें और EarnByCode के साथ अधिक कमाई के लिए रैंकों में ऊपर जाएँ',
    'leaderboard.full_rankings': 'पूर्ण रैंकिंग',
    'leaderboard.no_users': 'आपकी खोज से मेल खाने वाले कोई उपयोगकर्ता नहीं मिले',
    'leaderboard.clear_search': 'खोज साफ़ करें',
    // Contests
    'contests.title': 'EarnByCode प्रतियोगिताएँ',
    'contests.subtitle': 'दुनिया भर के डेवलपर्स के साथ प्रतिस्पर्धा करें और नकद इनाम जीतें! अपनी स्किल्स आज़माएँ और लीडरबोर्ड पर चढ़ें।',
    'contests.tab.all': 'सभी',
    'contests.tab.upcoming': 'आगामी',
    'contests.tab.live': 'लाइव',
    'contests.tab.ended': 'समाप्त',
    'contests.loading': 'प्रतियोगिताएँ लोड हो रही हैं...',
    'contests.empty.title': 'कोई प्रतियोगिता नहीं मिली',
    'contests.empty.all_desc': 'वर्तमान में कोई प्रतियोगिता उपलब्ध नहीं है। नई रोमांचक प्रतियोगिताएँ जल्द आ रही हैं!',
    'contests.empty.tab_desc': 'इस समय कोई {tab} प्रतियोगिता नहीं है।',
    'contests.view_all': 'सभी प्रतियोगिताएँ देखें',
    'contests.start': 'प्रारंभ',
    'contests.duration': 'अवधि',
    'contests.fee': 'शुल्क',
    'contests.prize': 'इनाम',
    'contests.live_badge': 'लाइव',
    'contests.view_results': 'परिणाम देखें',
    'contests.enter': 'प्रतियोगिता में प्रवेश करें',
    'contests.registration_closed': 'पंजीकरण बंद',
    'contests.registered': '✓ पंजीकृत',
    'contests.join': 'प्रतियोगिता में शामिल हों',
    'contests.login_required': 'लॉगिन आवश्यक',
    'contests.login_required_desc': 'प्रतियोगिताओं में भाग लेने और इनाम जीतने के लिए कृपया लॉगिन करें।',
    'contests.status.upcoming': 'आगामी',
    'contests.status.live': 'लाइव',
    'contests.status.ended': 'समाप्त',
    'contests.status.unknown': 'अज्ञात',
    'contests.problems_count': '{n} समस्याएँ',
    // Home
    'home.hero.tagline': 'कमाई के लिए कोड करें',
    'home.hero.subtitle': 'डेवलपर्स के लिए कौशल बढ़ाने, प्रतिस्पर्धा करने और कमाने का बेहतरीन प्लेटफ़ॉर्म। समाधान बनाएं, इनाम पाएं और EarnByCode के साथ कमाई निकालें।',
    'home.btn.start_coding': 'कोडिंग शुरू करें',
    'home.btn.join_contest': 'प्रतियोगिता में शामिल हों',
    'home.btn.create_account': 'मुफ़्त खाता बनाएँ',
    'home.stats.active_coders': 'सक्रिय कोडर्स',
    'home.stats.problems_solved': 'हल की गई समस्याएँ',
    'home.stats.total_prizes': 'जीते गए कुल इनाम',
    'home.stats.live_contests': 'लाइव प्रतियोगिताएँ',
    'home.why.title': 'EarnByCode क्यों चुनें?',
    'home.why.subtitle': 'सिर्फ़ कोडिंग प्रैक्टिस नहीं — यह एक पूरा इकोसिस्टम है जहाँ आपके कौशल को असली इनाम और पहचान मिलती है।',
    'home.features.realtime.title': 'रीयल-टाइम कोडिंग',
    'home.features.realtime.desc': 'ब्राउज़र में तुरंत प्रतिक्रिया और तेज़ निष्पादन के साथ कोड करें',
    'home.features.earn_money.title': 'असली पैसे कमाएँ',
    'home.features.earn_money.desc': 'प्रतियोगिताओं और चुनौतियों के माध्यम से अपनी कोडिंग स्किल्स को नकद इनाम में बदलें',
    'home.features.matching.title': 'कौशल-आधारित मैचिंग',
    'home.features.matching.desc': 'निष्पक्ष मुकाबले के लिए समान कौशल वाले डेवलपर्स के साथ प्रतिस्पर्धा करें',
    'home.features.ai.title': 'एआई-संचालित लर्निंग',
    'home.features.ai.desc': 'आपकी कोडिंग पैटर्न के आधार पर व्यक्तिगत समस्या अनुशंसाएँ प्राप्त करें',
    'home.how.title': 'यह कैसे काम करता है',
    'home.how.subtitle': 'कमाई शुरू करने के आसान चरण',
    'home.how.step1.title': 'समस्याएँ हल करें',
    'home.how.step1.desc': 'कोडिंग चुनौतियाँ पूरी करें और हर समस्या पर 1 कोडकॉइन पाएं',
    'home.how.step2.title': 'प्रतियोगिताओं में शामिल हों',
    'home.how.step2.desc': 'पेड प्रतियोगिताओं में भाग लें और नकद इनाम के लिए प्रतिस्पर्धा करें',
    'home.how.step3.title': 'जीतें और निकालेँ',
    'home.how.step3.desc': 'प्रतियोगिताएँ जीतें और अपनी कमाई बैंक खाते में निकालें',
    'home.cta.title': 'कोड से कमाई शुरू करने के लिए तैयार?',
    'home.cta.subtitle': 'हज़ारों डेवलपर्स से जुड़ें जो EarnByCode के साथ कमा रहे हैं',
    'home.cta.get_started': 'अभी शुरू करें',
    'home.cta.browse_contests': 'प्रतियोगिताएँ देखें',
    // Public Profile
    'profile.codecoins': 'कोडकॉइन्स',
    'profile.points': 'अंक',
    'profile.rank': 'लीडरबोर्ड रैंक',
    'profile.solved': 'हल किए',
    'profile.recent_solved': 'हाल ही में हल की गई समस्याएँ',
    'profile.recent_contests': 'हाल की प्रतियोगिताएँ',
    'profile.user_not_found': 'उपयोगकर्ता नहीं मिला',
    'profile.back_to_leaderboard': 'लीडरबोर्ड पर वापस जाएँ',
    // Settings basic
    'settings.title': 'सेटिंग्स',
    'settings.subtitle': 'अपने खाते और प्राथमिकताओं का प्रबंधन करें',
    'settings.tab.account': 'खाता',
    'settings.tab.notifications': 'सूचनाएँ',
    'settings.tab.privacy': 'गोपनीयता',
    'settings.tab.preferences': 'प्राथमिकताएँ',
    // Submissions
    'subs.title': 'मेरी सबमिशन्स',
    'subs.subtitle': 'अपनी कोडिंग प्रगति और सबमिशन इतिहास ट्रैक करें',
    'subs.filter.all': 'सभी सबमिशन्स',
    'subs.filter.accepted': 'स्वीकृत',
    'subs.filter.wrong_answer': 'गलत उत्तर',
    'subs.filter.tle': 'समय सीमा पार',
    'subs.filter.runtime_error': 'रनटाइम त्रुटि',
    'subs.filter.compilation_error': 'कम्पाइलेशन त्रुटि',
    'subs.sort.label': 'क्रमबद्ध करें:',
    'subs.sort.date_desc': 'तिथि (नवीनतम)',
    'subs.sort.date_asc': 'तिथि (पुराना)',
    'subs.sort.status_asc': 'स्थिति (A→Z)',
    'subs.sort.status_desc': 'स्थिति (Z→A)',
    'subs.sort.lang_asc': 'भाषा (A→Z)',
    'subs.sort.lang_desc': 'भाषा (Z→A)',
    'subs.pagination.prev': 'पिछला',
    'subs.pagination.next': 'अगला',
    'subs.pagination.page_of': 'पृष्ठ {p} / {t}',
    'subs.pagination.per_page': '{n} / पृष्ठ',
    'subs.list.title': 'सबमिशन इतिहास',
    'subs.list.total': '{n} कुल',
    'subs.card.tests_passed': 'टेस्ट पास',
    'subs.card.runtime': 'रनटाइम:',
    'subs.card.memory': 'मेमोरी:',
    'subs.empty.title': 'अभी कोई सबमिशन नहीं',
    'subs.empty.subtitle': 'सबमिशन्स देखने के लिए समस्याएँ हल करना शुरू करें',
    'subs.empty.cta': 'समस्याएँ देखें',
    'subs.modal.title': 'सबमिशन विवरण - {title}',
    'subs.modal.status': 'स्थिति',
    'subs.modal.language': 'भाषा',
    'subs.modal.runtime': 'रनटाइम',
    'subs.modal.memory': 'मेमोरी',
    'subs.modal.submitted_code': 'सबमिट किया गया कोड',
    'subs.modal.test_results': 'टेस्ट परिणाम',
    'subs.modal.tests_passed': 'टेस्ट पास',
    'subs.modal.close': 'बंद करें',
    // Submission Detail page
    'subs.detail.back': 'वापस',
    'subs.detail.title': 'सबमिशन विवरण',
    'subs.detail.problem': 'समस्या',
    'subs.detail.submitted': 'सबमिट किया गया',
    'subs.detail.language': 'भाषा',
    'subs.detail.status': 'स्थिति',
    'subs.detail.runtime': 'रनटाइम',
    'subs.detail.memory': 'मेमोरी',
    'subs.detail.tests_passed': 'टेस्ट पास',
    'subs.detail.submitted_code': 'सबमिट किया गया कोड',
    'subs.detail.not_found': 'सबमिशन नहीं मिला',
    // Problems List
    'problems.title': 'EarnByCode समस्याएँ',
    'problems.subtitle': 'प्रोग्रामिंग चुनौतियों के हमारे क्यूरेटेड संग्रह से अपनी कोडिंग कौशल निखारें',
    'problems.stats.count': 'समस्याएँ',
    'problems.stats.learning': 'सीखना',
    'problems.active_filters': 'सक्रिय फ़िल्टर:',
    'problems.filter.search': 'खोज:',
    'problems.filter.level': 'स्तर:',
    'problems.filter.topic': 'विषय:',
    'problems.clear_all': 'सभी साफ़ करें',
    'problems.loading.title': 'समस्याएँ लोड हो रही हैं',
    'problems.loading.subtitle': 'आपकी कोडिंग चुनौतियाँ तैयार की जा रही हैं...',
    'problems.searching': 'चुनौतियाँ खोजी जा रही हैं...',
    'problems.empty.title': 'कोई समस्या नहीं मिली',
    'problems.empty.desc': 'हम आपकी वर्तमान फ़िल्टर से मेल खाने वाली कोई समस्या नहीं ढूँढ सके।\nअधिक चुनौतियाँ खोजने के लिए अपने खोज मानदंड समायोजित करें।',
    'problems.empty.reset': 'सभी फ़िल्टर रीसेट करें',
    // Problem Detail
    'problem.loading': 'समस्या लोड हो रही है...',
    'problem.accepted': '{p}% स्वीकार',
    'problem.submissions_chip': '{n} सबमिशन्स',
    'problem.codecoin': '1 कोडकॉइन',
    'problem.tab.description': 'विवरण',
    'problem.tab.editorial': 'एडिटोरियल',
    'problem.tab.discuss': 'चर्चा',
    'problem.examples': 'उदाहरण',
    'problem.example_n': 'उदाहरण {i}:',
    'problem.input': 'इनपुट: ',
    'problem.output': 'आउटपुट: ',
    'problem.explanation': 'व्याख्या: ',
    'problem.constraints': 'बाधाएँ',
    'problem.editorial.locked': 'समस्या हल करने के बाद एडिटोरियल उपलब्ध होगा',
    'problem.discuss.empty': 'अभी कोई चर्चा नहीं है। सबसे पहले आप शुरू करें! ',
    // Login Prompt
    'login.required.title': 'साइन इन आवश्यक',
    'login.required.desc': 'कोड सबमिट या रन करने के लिए आपको साइन इन होना चाहिए। कृपया लॉग इन करें या खाता बनाएँ।',
    'login.required.cancel': 'रद्द करें',
    'login.required.login': 'लॉग इन',
  },
  es: {
    'nav.home': 'Inicio',
    'nav.problems': 'Problemas',
    'nav.contests': 'Concursos',
    'nav.discuss': 'Debate',
    'nav.leaderboard': 'Clasificación',
    'nav.company': 'Compañía',
    'nav.contact': 'Contacto',
    'nav.wallet': 'Billetera',
    'settings.title': 'Configuración',
    'settings.preferences.language': 'Idioma',
    // Login page
    'login.title': 'Bienvenido de nuevo',
    'login.subtitle': 'Inicia sesión en <b>AlgoBucks</b>',
    'login.email': 'Correo electrónico',
    'login.password': 'Contraseña',
    'login.remember': 'Recuérdame',
    'login.forgot': '¿Olvidaste tu contraseña?',
    'login.submit': 'Iniciar sesión en AlgoBucks',
    'login.continue_with': 'O continúa con',
    'login.no_account': '¿No tienes una cuenta?',
    'login.create_here': 'Crea una aquí',
    'login.error.fill_all': 'Por favor completa todos los campos',
    'login.error.invalid': 'Correo o contraseña inválidos',
    'login.success': 'Has iniciado sesión correctamente.',
    // Common / Header / Footer
    'common.company': 'Compañía',
    'common.about': 'Acerca de',
    'common.about_us': 'Sobre nosotros',
    'common.careers': 'Empleos',
    'common.press': 'Prensa',
    'common.contact': 'Contacto',
    'common.blog': 'Blog',
    'common.help_center': 'Centro de ayuda',
    'common.community': 'Comunidad',
    'common.stay_connected': 'Mantente conectado',
    'common.subscribe_newsletter': 'Suscribirse al boletín',
    'common.join_community': 'Unirse a la comunidad',
    'common.legal': 'Legal',
    'common.terms': 'Términos de servicio',
    'common.privacy': 'Política de privacidad',
    'common.cookies': 'Política de cookies',
    'common.all_rights_reserved': 'Todos los derechos reservados.',
    'auth.login': 'Iniciar sesión',
    'auth.signup': 'Regístrate',
    'auth.create_free_account': 'Crear cuenta gratis',
    'user.your_profile': 'Tu perfil',
    'user.settings': 'Configuraciones',
    'user.admin_panel': 'Panel de administración',
    'user.admin': 'Admin',
    'user.sign_out': 'Cerrar sesión',
    'stats.coins': 'Monedas',
    'stats.wallet': 'Billetera',
    'stats.points': 'Puntos',
  },
  fr: {
    'nav.home': 'Accueil',
    'nav.problems': 'Problèmes',
    'nav.contests': 'Concours',
    'nav.discuss': 'Discussion',
    'nav.leaderboard': 'Classement',
    'nav.company': 'Entreprise',
    'nav.contact': 'Contact',
    'nav.wallet': 'Portefeuille',
    'settings.title': 'Paramètres',
    'settings.preferences.language': 'Langue',
    // Login page
    'login.title': 'Bon retour',
    'login.subtitle': 'Connectez-vous à <b>AlgoBucks</b>',
    'login.email': 'Adresse e-mail',
    'login.password': 'Mot de passe',
    'login.remember': 'Se souvenir de moi',
    'login.forgot': 'Mot de passe oublié ?',
    'login.submit': "Se connecter à AlgoBucks",
    'login.continue_with': 'Ou continuer avec',
    'login.no_account': "Vous n'avez pas de compte ?",
    'login.create_here': 'Créez-en un ici',
    'login.error.fill_all': 'Veuillez remplir tous les champs',
    'login.error.invalid': 'E-mail ou mot de passe invalide',
    'login.success': 'Connexion réussie.',
    // Common / Header / Footer
    'common.company': 'Entreprise',
    'common.about': 'À propos',
    'common.about_us': 'À propos de nous',
    'common.careers': 'Carrières',
    'common.press': 'Presse',
    'common.contact': 'Contact',
    'common.blog': 'Blog',
    'common.help_center': 'Centre d’aide',
    'common.community': 'Communauté',
    'common.stay_connected': 'Restez connecté',
    'common.subscribe_newsletter': 'S’abonner à la newsletter',
    'common.join_community': 'Rejoindre la communauté',
    'common.legal': 'Mentions légales',
    'common.terms': 'Conditions d’utilisation',
    'common.privacy': 'Politique de confidentialité',
    'common.cookies': 'Politique de cookies',
    'common.all_rights_reserved': 'Tous droits réservés.',
    'auth.login': 'Se connecter',
    'auth.signup': 'S’inscrire',
    'auth.create_free_account': 'Créer un compte gratuit',
    'user.your_profile': 'Votre profil',
    'user.settings': 'Paramètres',
    'user.admin_panel': 'Panneau d’administration',
    'user.admin': 'Admin',
    'user.sign_out': 'Se déconnecter',
    'stats.coins': 'Pièces',
    'stats.wallet': 'Portefeuille',
    'stats.points': 'Points',
  },
  de: {
    'nav.home': 'Startseite',
    'nav.problems': 'Aufgaben',
    'nav.contests': 'Wettbewerbe',
    'nav.discuss': 'Diskutieren',
    'nav.leaderboard': 'Bestenliste',
    'nav.company': 'Unternehmen',
    'nav.contact': 'Kontakt',
    'nav.wallet': 'Wallet',
    'settings.title': 'Einstellungen',
    'settings.preferences.language': 'Sprache',
    // Login page
    'login.title': 'Willkommen zurück',
    'login.subtitle': 'Bei <b>AlgoBucks</b> anmelden',
    'login.email': 'E-Mail-Adresse',
    'login.password': 'Passwort',
    'login.remember': 'Angemeldet bleiben',
    'login.forgot': 'Passwort vergessen?',
    'login.submit': 'Bei AlgoBucks anmelden',
    'login.continue_with': 'Oder fortfahren mit',
    'login.no_account': 'Noch kein Konto?',
    'login.create_here': 'Hier erstellen',
    'login.error.fill_all': 'Bitte alle Felder ausfüllen',
    'login.error.invalid': 'Ungültige E-Mail oder Passwort',
    'login.success': 'Sie wurden erfolgreich angemeldet.',
    // Common / Header / Footer
    'common.company': 'Unternehmen',
    'common.about': 'Über',
    'common.about_us': 'Über uns',
    'common.careers': 'Karriere',
    'common.press': 'Presse',
    'common.contact': 'Kontakt',
    'common.blog': 'Blog',
    'common.help_center': 'Hilfe-Center',
    'common.community': 'Community',
    'common.stay_connected': 'Verbunden bleiben',
    'common.subscribe_newsletter': 'Newsletter abonnieren',
    'common.join_community': 'Community beitreten',
    'common.legal': 'Rechtliches',
    'common.terms': 'Nutzungsbedingungen',
    'common.privacy': 'Datenschutzerklärung',
    'common.cookies': 'Cookie-Richtlinie',
    'common.all_rights_reserved': 'Alle Rechte vorbehalten.',
    'auth.login': 'Anmelden',
    'auth.signup': 'Registrieren',
    'auth.create_free_account': 'Kostenloses Konto erstellen',
    'user.your_profile': 'Dein Profil',
    'user.settings': 'Einstellungen',
    'user.admin_panel': 'Admin-Bereich',
    'user.admin': 'Admin',
    'user.sign_out': 'Abmelden',
    'stats.coins': 'Münzen',
    'stats.wallet': 'Wallet',
    'stats.points': 'Punkte',
  },
};

interface I18nContextValue {
  lang: LangCode;
  setLanguage: (lang: LangCode) => void;
  t: (key: string) => string;
}

const I18nContext = createContext<I18nContextValue | undefined>(undefined);

export const I18nProvider: React.FC<{ initialLang?: LangCode; children: React.ReactNode }> = ({ initialLang, children }) => {
  const [lang, setLang] = useState<LangCode>(() => {
    const saved = (localStorage.getItem('lang') as LangCode | null) || undefined;
    return initialLang || saved || 'en';
  });

  useEffect(() => {
    localStorage.setItem('lang', lang);
    try {
      document.documentElement.lang = lang;
    } catch {}
  }, [lang]);

  const t = useMemo(() => {
    const dict = dictionaries[lang] || dictionaries.en;
    return (key: string) => dict[key] ?? key;
  }, [lang]);

  const setLanguage = (next: LangCode) => setLang(next);

  const value: I18nContextValue = { lang, setLanguage, t };
  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
};

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error('useI18n must be used within I18nProvider');
  return ctx;
}
